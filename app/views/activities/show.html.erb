<div class="row container">
	<div class="col s12 card-panel z-depth-2">
		<h3><%= @activity.plan %></h3>
		<% if @activity.user_going?(current_user) %>
			<%= link_to "Can't go", remove_user_activity_path(@activity.activity), method: :delete, class: 'btn red waves-effect waves-light' %>
		<% else %>
			<%= link_to "Go", add_user_activity_path(@activity.activity), remote: true, method: :post, class: 'btn green waves-effect waves-light', id: "activity-go" %>
		<% end %>
		<% if @activity.proposed_by?(current_user) %>
			<%= link_to "Edit Activity", edit_activity_path(@activity.activity), class: 'btn orange waves-effect waves-light' %>
			<%= link_to "Delete Activity", activity_path(@activity.activity), method: :delete, class: "btn red white-text", data: {confirm: "Are you sure you want to delete this activity?"} %>
		<% end %>
		<button type="button" class="btn light-green waves-effect waves-light right-align" id="map-hider" >Toggle Map</button>
		<h3><%= link_to @activity.group_name, @activity.group %></h3>
		<h4><%= local_time(@activity.appointment) %></h4>
		<h4><%= @activity.location %></h4>

		<div id="map-canvas"></div>
	</div>

	<div class="col s12 m6">
		<h3>People going</h3>
			<ul class="collection">
			<% @activity.users.each do |user| %>
				<%= link_to user.name, public_profile_user_path(user), class: "collection-item" %>
			<% end %>
			</ul>
	</div>

	<div class="col s12 m6">
		<h3>Messages</h3>
		<div class="messages card-panel z-depth-2" id="activity-messages">
			<% @activity.messages.each do |message| %>
			  <%= render partial: 'messages/message', locals: {message: message} %>
			<% end %>
		</div>

		<%= render partial: 'messages/new', locals: { messageable: @activity.activity, message: @activity.new_message } %>
	</div>
</div>
<%= javascript_tag do %>
	mapActivityLocation('<%= @activity.latitude %>', ' <%= @activity.longitude %>')
<% end %>
